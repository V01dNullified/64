<!DOCTYPE html>
<html>
  <head>
    <title>New Tab</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }

      iframe {
        width: 100%;
        height: 85vh;
        border: none;
        position: relative;
        z-index: 1;
      }

      #overlayFrame {
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        display: none;
        z-index: 2;
      }

      #overlayFrame img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensures the image covers the entire iframe */
      }
    </style>
  </head>
  <body>
    <iframe src="https://v02dnullified-v01dnullified.koyeb.app"></iframe>
    <iframe id="overlayFrame" src="mao.png"></iframe>
    <h1>vault</h1>
    <form method="get" action="#" onsubmit="openPreview(); return false;">
      <label for="url_input">Enter a URL:</label>
      <input type="url" id="url_input" name="url" required>
      <button type="submit">Submit</button>
    </form>
    <br>

    <script>
      let isOverlayVisible = false;
      const overlayFrame = document.getElementById('overlayFrame');
      document.addEventListener('keydown', function(event) {
        if (event.key === '~') {
          event.preventDefault();
          if (!isOverlayVisible) {
            overlayFrame.style.display = 'block';
            isOverlayVisible = true;
          } else {
            overlayFrame.style.display = 'none';
            isOverlayVisible = false;
          }
        }
      });
      function openPreview() {
        var url = document.getElementById('url_input').value;
        var previewWindow = window.open('about:blank', 'preview', 'toolbar=no, scrollbars=yes, resizable=yes');
        var previewDoc = previewWindow.document;
        var iframe = previewDoc.createElement('iframe');
        iframe.src = url;
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        previewDoc.body.appendChild(iframe);
        function resizeIframe() {
          var width = Math.max(previewWindow.innerWidth, previewDoc.documentElement.clientWidth);
          var height = Math.max(previewWindow.innerHeight, previewDoc.documentElement.clientHeight);
          iframe.style.width = width + 'px';
          iframe.style.height = height + 'px';
        }
        resizeIframe();
        previewWindow.addEventListener('resize', resizeIframe);
      }
      window.onload = function() {
        window.alert("PRESS ~ AS PANIC BUTTON. now.gg doesn't work, fix soon"); // Fixed typo
        const sessionCookieValue = getCookie("session");
        if (!sessionCookieValue || parseInt(sessionCookieValue) < 3) {
          window.location.href = "404.html";
        }
      };
    </script>
  </body>
</html>
